<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-success shadow-sm sticky-top">
  <div class="container-fluid">

    <!-- Brand -->
    <a class="navbar-brand fw-bold" href="#">ğŸŒ Country Explorer</a>

    <!-- Toggle (mobile) -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar content -->
    <div class="collapse navbar-collapse" id="navbarContent">

      <!-- Menu -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Countries</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
      </ul>

      <!-- Filters / Search -->
      <div class="d-flex align-items-center gap-2">

        <!-- Region filter -->
        <select
          class="form-select form-select-sm"
          [(ngModel)]="selectedRegion"
          [ngModelOptions]="{standalone: true}">
          <option value="">All Regions</option>
          <option *ngFor="let region of regions" [value]="region">{{ region }}</option>
        </select>

        <!-- Navbar search input -->
        <input
          class="form-control form-control-sm"
          type="search"
          placeholder="Search country..."
          [(ngModel)]="searchTerm"
          [ngModelOptions]="{standalone: true}">
      </div>
    </div>
  </div>
</nav>

<!-- FILTERS SECTION (optional for extra filters) -->
<div class="container-fluid mt-4">
  <div class="row mb-3 justify-content-center">
    <!-- Empty for now, can add more filters here -->
  </div>

  <!-- COUNTRY CARDS -->
  <ng-container *ngIf="countries$ | async as countries; else loading">

    <!-- No results -->
    <div *ngIf="filterCountries(countries).length === 0" class="text-center text-muted mt-5">
      No countries found ğŸ˜¢
    </div>

    <!-- Cards grid -->
    <div class="row g-3">
      <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let country of filterCountries(countries)">
        <div class="card h-100 shadow-sm border-0 rounded-3">

          <!-- Flag -->
          <img [src]="country.flags.png" class="card-img-top" alt="Flag">

          <!-- Card header -->
          <div class="card-header bg-success text-white text-center fw-bold">
            {{ country.name.common }}
          </div>

          <!-- Card body -->
          <div class="card-body">
            <p><b>Official Name:</b> {{ country.name.official }}</p>
            <p><b>Capital:</b> {{ country.capital?.[0] || 'N/A' }}</p>
            <p><b>Population:</b> {{ country.population | number }}</p>
            <p><b>Area:</b> {{ country.area | number }} kmÂ²</p>
            <p><b>Region:</b> {{ country.region }}</p>
            <p><b>Subregion:</b> {{ country.subregion }}</p>
            <p><b>Languages:</b> {{ getLanguages(country.languages) }}</p>
            <p><b>Currencies:</b> {{ getCurrencies(country.currencies) }}</p>

            <!-- Optional: Coat of Arms -->
            <img *ngIf="country.coatOfArms?.png" [src]="country.coatOfArms.png" alt="Coat of Arms" class="mt-2 w-100">
          </div>

        </div>
      </div>
    </div>

  </ng-container>

  <!-- Loading spinner -->
  <ng-template #loading>
    <div class="text-center my-5 d-flex flex-column align-items-center">
      <div class="spinner-border text-success" role="status"></div>
      <p class="mt-2 text-muted">Loading countries...</p>
    </div>
  </ng-template>
</div>

<!-- FOOTER -->
<footer class="text-center py-3 text-muted">
  Â© 2026 Country Explorer | Built with Angular
</footer>
